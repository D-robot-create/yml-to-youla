<IfModule mod_rewrite.c>
    RewriteEngine On
    
    # Запрещаем доступ к служебным папкам
    RewriteRule ^(feeds|logs|config|ui/partials) - [F,L]
    
    # API эндпоинты
    RewriteRule ^api/(.*)$ api.php?action=$1 [QSA,L]
    
    # UI страницы
    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d
    RewriteRule ^(.*)$ index.php?page=$1 [QSA,L]
</IfModule>

# Безопасность
Options -Indexes

# Кэширование
<FilesMatch "\.(css|js)$">
    Header set Cache-Control "max-age=604800, public"
</FilesMatch>

<FilesMatch "\.xml$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires 0
</FilesMatch>

# Защита от XSS
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "SAMEORIGIN"
Header set X-XSS-Protection "1; mode=block"